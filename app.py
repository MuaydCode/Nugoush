import streamlit as st
from streamlit_gsheets import GSheetsConnection
import pandas as pd

st.set_page_config(page_title="ููุตุฉ ููููุด", layout="wide")
st.title("๐ธ๐ฉ ููุตุฉ ููููุด ูููููุฑ")

try:
    # ุงูุงุชุตุงู ุจุงูุฌุฏูู
    conn = st.connection("gsheets", type=GSheetsConnection)
    df = conn.read()

    # ุฅุฐุง ูุงู ุงูุฌุฏูู ูุญุชูู ุนูู ุจูุงูุงุช
    if not df.empty:
        st.write("โ ุชู ุงูุงุชุตุงู ุจุงูุฌุฏูู ุจูุฌุงุญ")
        
        # ุชุญููู ุงูุฅุญุฏุงุซูุงุช ูุฏููุงู ููุชุฌุฑุจุฉ (ุจูุงุกู ุนูู ุงูุฃุฑูุงู ุงูุชู ุฃุฑุณูุชูุง ุฃูุช)
        # ูุฐุง ุงูุณุทุฑ ุณูุฌุนู ุงูููุทุฉ ุชุธูุฑ ููุฑุงู ุจุบุถ ุงููุธุฑ ุนู ุงูุฑุงุจุท
        df['lat'] = 15.5780
        df['lon'] = 32.4857
        
        # ุฑุณู ุงูุฎุฑูุทุฉ
        st.subheader("๐ ุฎุฑูุทุฉ ุงูุงุณุชุบุงุซุฉ")
        st.map(df[['lat', 'lon']])
        
        # ุนุฑุถ ุงูุจูุงูุงุช ุงูููุชูุจุฉ ูู ุงูุฌุฏูู
        st.subheader("๐ ุงูุจูุงูุงุช ุงููุณุชููุฉ")
        st.dataframe(df)
    else:
        st.info("ุงูุฌุฏูู ูุชุตู ููููู ูุงุฑุบ ุญุงููุงู. ูุฑุฌู ุฅุถุงูุฉ ุจูุงูุงุช ูู ุงูุณุทุฑ ุงูุซุงูู.")

except Exception as e:
    st.error(f"ุญุฏุซ ุฎุทุฃ ูู ูุฑุงุกุฉ ุงูุจูุงูุงุช: {e}")
    st.info("ุชุฃูุฏ ูู ูุถุน ุฑุงุจุท ุงูุฌุฏูู ุงูุตุญูุญ ูู Secrets ูุงุฌุนูู 'ุนุงูุงู'")
