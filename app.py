import streamlit as st
import pandas as pd

# ุฅุนุฏุงุฏ ุงูุตูุญุฉ
st.set_page_config(page_title="ููุตุฉ ููููุด", layout="wide")

st.title("๐ ุฎุฑูุทุฉ ูุฏุงุกุงุช ุงูุงุณุชุบุงุซุฉ - ููููุด")

# ูุญุงููุฉ ุฌูุจ ุงูุจูุงูุงุช ูุจุงุดุฑุฉ ุจุฏูู ููุชุจุงุช ูุนูุฏุฉ (ุงูุทุฑููุฉ ุงููุจุงุดุฑุฉ)
url = "https://docs.google.com/spreadsheets/d/1JaWlB_7mOYl2ZO1A1meINlcNFE75G3XM2tptfdkDJM0/gviz/tq?tqx=out:csv"

try:
    # ูุฑุงุกุฉ ุงูุฌุฏูู ูููู CSV ูุจุงุดุฑุฉ (ุฏู ุฃุณุฑุน ูุฃุถูู ุทุฑููุฉ ุจุชูุฑุจ ูู ูุดุงูู ุงูุณูุฑูุฑ)
    df = pd.read_csv(url)
    
    # ุชูุธูู ุงูุตููู ุงููุงุฑุบุฉ
    df = df.dropna(how="all")

    if not df.empty:
        # ุนุฑุถ ุงูุฎุฑูุทุฉ (ุชุฃูุฏ ูู ูุฌูุฏ ุฃุนูุฏุฉ latitude ู longitude)
        st.map(df)
        
        st.write("---")
        st.subheader("๐ ุงูุจูุงูุงุช ุงููุญุฏุซุฉ (Live):")
        st.dataframe(df)
        
        # ุงูุชุฃูุฏ ูู ุงุณู ุฌุฏู ููุณู
        if "ุฌุฏู ููุณู" in df.values:
            st.success("โ ุชู ุชุญุฏูุซ ุงูุจูุงูุงุช: ุงุณู 'ุฌุฏู ููุณู' ููุฌูุฏ ุงูุขู!")
    else:
        st.warning("ุงูุฌุฏูู ููุชูุญ ูููู ูุงุฑุบุ ุฃุถู ุจูุงูุงุช ูู ุฌูุฌู ุดูุช.")

except Exception as e:
    st.error(f"ูุดู ุงูุงุชุตุงู ุงููุจุงุดุฑ ุจุงูุฌุฏูู: {e}")

# ุฒุฑ ุงูุชุญุฏูุซ
if st.sidebar.button('๐ ุชุญุฏูุซ ููุฑู'):
    st.rerun()
